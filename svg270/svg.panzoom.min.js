/*! svg.panzoom.js v1.2.3 MIT*/;!function(){"use strict";var f=function(t){return t.touches||(t.touches=[{clientX:t.clientX,clientY:t.clientY}]),t.touches};SVG.extend(SVG.Doc,SVG.Nested,{panZoom:function(t){if(this.off(".panZoom"),!1===t)return this;var c,u,n=(t=t||{}).zoomFactor||.03,l=t.zoomMin||Number.MIN_VALUE,m=t.zoomMax||Number.MAX_VALUE,e=!1,o=function(t){(u=f(t)).length<2||(t.preventDefault(),this.fire("pinchZoomStart",{event:t}).event().defaultPrevented||(this.off("touchstart.panZoom",o),e=!0,SVG.on(document,"touchmove.panZoom",a,this,{passive:!1}),SVG.on(document,"touchend.panZoom",i,this,{passive:!1})))},i=function(t){t.preventDefault(),e=!1,this.fire("pinchZoomEnd",{event:t}),SVG.off(document,"touchmove.panZoom",a),SVG.off(document,"touchend.panZoom",i),this.on("touchstart.panZoom",o)},a=function(t){t.preventDefault();var e=f(t),o=this.zoom(),n=Math.sqrt(Math.pow(u[0].clientX-u[1].clientX,2)+Math.pow(u[0].clientY-u[1].clientY,2))/Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2));(o<l&&1<n||m<o&&n<1)&&(n=1);var i={x:e[0].clientX+.5*(e[1].clientX-e[0].clientX),y:e[0].clientY+.5*(e[1].clientY-e[0].clientY)},a=u[0].clientX+.5*(u[1].clientX-u[0].clientX),s=u[0].clientY+.5*(u[1].clientY-u[0].clientY),c=this.point(i.x,i.y),h=this.point(2*i.x-a,2*i.y-s),r=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(c.x,c.y).scale(n,0,0).translate(-h.x,-h.y));this.viewbox(r),u=e,this.fire("zoom",{box:r,focus:h})},s=function(t){t.preventDefault(),this.off("mousedown.panZoom",s),u=f(t),e||(this.fire("panStart",{event:t}),c={x:u[0].clientX,y:u[0].clientY},SVG.on(document,"mousemove.panZoom",r,this),SVG.on(document,"mouseup.panZoom",h,this))},h=function(t){t.preventDefault(),SVG.off(document,"mousemove.panZoom",r),SVG.off(document,"mouseup.panZoom",h),this.on("mousedown.panZoom",s),this.fire("panEnd",{event:t})},r=function(t){t.preventDefault();var e=f(t),o={x:e[0].clientX,y:e[0].clientY},n=this.point(o.x,o.y),i=this.point(c.x,c.y),a=[i.x-n.x,i.y-n.y],s=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(a[0],a[1]));this.viewbox(s),c=o};return this.on("wheel.panZoom",function(t){if(t.preventDefault(),0!=t.deltaY){var e=this.zoom()-n*t.deltaY/Math.abs(t.deltaY),o=this.point(t.clientX,t.clientY);m<e&&(e=m),e<l&&(e=l),this.zoom(e,o)}}),this.on("touchstart.panZoom",o,this,{passive:!1}),this.on("mousedown.panZoom",s,this),this},zoom:function(t,e){var o=this.node.clientWidth,n=this.node.clientHeight,i=this.viewbox();if(!o&&!n){var a=window.getComputedStyle(this.node);o=parseFloat(a.getPropertyValue("width")),n=parseFloat(a.getPropertyValue("height"))}var s=o/i.width,c=n/i.height,h=Math.min(s,c);if(null==t)return h;var r=h/t;r===1/0&&(r=Number.MIN_VALUE),e=e||new SVG.Point(o/2/s+i.x,n/2/c+i.y);var u=new SVG.Box(i).transform((new SVG.Matrix).scale(r,e.x,e.y));return this.fire("zoom",{box:u,focus:e}).event().defaultPrevented?this:this.viewbox(u)}}),SVG.extend(SVG.FX,{zoom:function(t,e){return this.add("zoom",[new SVG.Number(t)].concat(e||[]))}})}();